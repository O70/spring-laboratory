<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="template :: app_template(~{::title}, ~{::div.content-wrapper}, ~{::script})">
<head>
    <title>Profile</title>
</head>
<body>
    <div class="content-wrapper">
        <el-card class="min-h-3">
            <el-row>
                <el-col :offset="8" :span="8">
                    <el-form ref="form" :model="form" :rules="rules" :disabled="form.username === 'admin'" label-width="80px">
                        <el-form-item label="昵称" prop="nickname">
                            <el-input v-model.trim="form.nickname"></el-input>
                        </el-form-item>
                        <el-form-item label="原密码" prop="oldPassword">
                            <el-input type="password" v-model="form.oldPassword" show-password autocomplete="off"></el-input>
                        </el-form-item>
                        <el-form-item label="信密码" prop="newPassword">
                            <el-input type="password" v-model="form.newPassword" show-password autocomplete="off"></el-input>
                        </el-form-item>
                        <el-form-item label="确认密码" prop="checkPassword">
                            <el-input type="password" v-model="form.checkPassword" show-password autocomplete="off"></el-input>
                        </el-form-item>
                        <el-form-item class="txt-r">
                            <el-button type="primary" @click="handleSave">保存</el-button>
                        </el-form-item>
                    </el-form>
                </el-col>
            </el-row>
        </el-card>
    </div>
    <script type="text/javascript">
        Factory.Vue.build({
            data() {
                return {
                    axios: Factory.Request,
                    api: '/api/user',
                    disabled: false,
                    form: {
                        nickname: null,
                        oldPassword: null,
                        newPassword: null,
                        checkPassword: null
                    },
                    rules: {}
                }
            },
            created() {
                this.axios.get(`${this.api}/current`).then(data => Object.assign(this.form, data));
            },
            methods: {
                handleSave() {

                }
            }
        });
    </script>
</body>
</html>
